## æ¦‚è¿°

> éšç€å‰ç«¯å·¥ç¨‹åŒ–çš„æ—¥ç›Šæˆç†Ÿï¼Œä»£ç è§„èŒƒåŒ–å¯¹äºå¼€å‘æ•ˆç‡çš„æå‡èµ·ç€å¾ˆå¤§çš„ä½œç”¨ï¼ŒåŒ…æ‹¬åæœŸçš„ç»´æŠ¤ï¼Œç»Ÿä¸€çš„è§„èŒƒèƒ½èŠ‚çœäº¤æ¥çš„æ—¶é—´æˆæœ¬ï¼Œè€Œè§„èŒƒåŒ…æ‹¬ç›®å½•ç»“æ„ã€ä»£ç è´¨é‡ï¼ˆå‘½åã€æ³¨é‡Šã€JSè§„èŒƒã€CSSè§„èŒƒã€ç¼©è¿›ç­‰ï¼‰



![img](https://user-gold-cdn.xitu.io/2020/2/25/1707b0eb47996f2e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



### 1.eslint

> ä¸€ä¸ªæ’ä»¶åŒ–çš„ javascript ä»£ç æ£€æµ‹å·¥å…·ï¼Œå®ƒå¯ä»¥ç”¨äºæ£€æŸ¥å¸¸è§çš„ JavaScript ä»£ç é”™è¯¯ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œä»£ç é£æ ¼æ£€æŸ¥

ä½¿ç”¨åˆ°ä¸¤ä¸ªæ‰©å±•åŒ…ï¼ˆairbnbè§„èŒƒ & eslint-plugin-vueï¼‰

- eslint-plugin-vue (vueå®˜æ–¹eslintæ’ä»¶,æ£€æµ‹vueè¯­æ³•)  [ å®˜æ–¹æ–‡æ¡£é“¾æ¥ğŸš€](https://user-gold-cdn.xitu.io/2020/2/25/1707b12c09353052)
- airbnbè§„èŒƒæ ‡å‡†ï¼š [å®˜æ–¹æ–‡æ¡£é“¾æ¥  ğŸš€](https://github.com/airbnb/javascript)

#### 1.1 å¦‚ä½•å®‰è£…eslint

```
 npm install -g eslint 
```

#### 1.2 å¦‚ä½•å°†eslinté›†æˆåˆ°é¡¹ç›®ä¸­

- æ–¹å¼1: packjsonä¸­é…ç½®eslintConfig



![img](https://user-gold-cdn.xitu.io/2020/2/25/1707b153e95ef7be?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



ä»¥ä¸Šæ¶‰åŠåˆ°çš„ruleè§„åˆ™åœ¨æ‰©å±•åŒ…çš„åŸºç¡€ä¸Šåšäº†è°ƒæ•´ï¼ŒåŸºäºä¸¤ä¸ªè§„èŒƒåšäº†ä¿®æ”¹é€‚åˆä½ çš„è§„èŒƒè§„åˆ™

- æ–¹å¼2:æ‰‹åŠ¨åˆ›å»º.eslintrc.js

  å°†æ–¹å¼1ä¸­çš„eslintconfigå†…å®¹æ‹·è´åˆ°.eslintrc.jsæ–‡ä»¶ä¸­å»

- æ–¹å¼3:ç”¨eslint çš„å‘½ä»¤è¡Œå·¥å…·åˆå§‹åŒ–åå†ä¿®æ”¹.eslintrc



![img](https://user-gold-cdn.xitu.io/2020/2/25/1707b20b2b67fb82?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



#### 1.3 å¦‚ä½•ä½¿ç”¨

##### 1.3.1åœ¨packjsonä¸­scriptsåŠ å…¥è„šæœ¬å‘½ä»¤

- vue-cli 3ä¸­çš„ä½¿ç”¨

```
"lint":"vue-cli-service lint"
```

- å…¶ä»–æ–¹å¼

```
"lint":"eslint --ext .js,.vue src" 
```

ğŸ™†æ£€æµ‹æ­£ç¡®çš„æç¤º

![img](https://user-gold-cdn.xitu.io/2020/2/25/1707bb22fd4489ae?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

ğŸ™…é”™è¯¯çš„æç¤º

![img](https://user-gold-cdn.xitu.io/2020/2/25/1707bb1c966125c1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



##### 1.3.2å¦‚ä½•å±è”½ä¸å¿…è¦çš„æ£€æµ‹ï¼ˆå¦‚å•å…ƒæµ‹è¯•ã€æœ¬åœ°mockç­‰ï¼‰

åˆ›å»º.eslintignore



![img](https://user-gold-cdn.xitu.io/2020/2/25/1707b241a13755c8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



#### 1.4 å¦‚ä½•é›†æˆåˆ°CI/CD

é›†æˆåˆ°éƒ¨ç½²ç¯èŠ‚ä¸­çš„ä»£ç æ‰«æç¯èŠ‚ï¼Œè§„èŒƒä¸é€šè¿‡åˆ™å‘å¸ƒå¤±è´¥

åœ¨Jenkinsfileæ–‡ä»¶ä¸­åŠ å…¥

![img](https://user-gold-cdn.xitu.io/2020/2/25/1707b26b8dde58d5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



#### 1.5 å¸¸è§çš„eslintè§„åˆ™

##### 1.5.1 å¸¸è§jsè§„åˆ™

> eslintå®˜æ–¹ [ç‚¹æˆ‘ğŸš€](https://eslint.org/docs/rules/)

```
rules:{
 "no-unused-vars": "warn", //æ˜¯å¦æ”¯æŒå­˜åœ¨æœªä½¿ç”¨çš„å˜é‡
 'no-debugger': process.env.NODE_ENV === 'production' ? 'error': 'off', //æ˜¯å¦ç¦æ­¢debugger
 'no-console': process.env.NODE_ENV === 'production' ? 'error': 'off', //æ˜¯å¦ç¦æ­¢console.log
  "no-var": "warn", 
  "no-eval": "warn",//ç¦æ­¢ä½¿ç”¨eval
}
```

##### 1.5.2 Vue ç›¸å…³ï¼ˆeslint-plugin-vueï¼‰

> å‚è€ƒ Vueå®˜æ–¹é£æ ¼æŒ‡å—, [ç‚¹æˆ‘ğŸš€](https://cn.vuejs.org/v2/style-guide/)

```
rules:{
  "vue/prop-name-casing": ["error", "camelCase"],// propåå¤§å°å†™ï¼šåœ¨å£°æ˜ prop çš„æ—¶å€™ï¼Œå…¶å‘½ååº”è¯¥å§‹ç»ˆä½¿ç”¨ camelCase
  "vue/name-property-casing": ["error", "PascalCase"], // JS/JSX ä¸­çš„ç»„ä»¶ååº”è¯¥å§‹ç»ˆæ˜¯ PascalCase çš„
  "vue/require-prop-types": "error", // propså®šä¹‰å°½é‡è¯¦ç»†
  "vue/require-v-for-key": "error", // v-forè®¾ç½®é”®å€¼ï¼Œä¸keyç»“åˆä½¿ç”¨
   "vue/no-use-v-if-with-v-for": ["error", {
    "allowUsingIterationVar": false
  }], //ä¸è¦æŠŠ v-if å’Œ v-for ç”¨åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Š
  "vue/max-attributes-per-line": ["error", {
    "singleline": 1,
    "multiline": {
      "max": 1,
      "allowFirstLine": false
    }
  }], //å¤šä¸ªç‰¹æ€§çš„å…ƒç´ åº”è¯¥åˆ†å¤šè¡Œæ’°å†™ï¼Œæ¯ä¸ªç‰¹æ€§ä¸€è¡Œ
}

```

##### 1.5.3 å¯ç”¨ç¦ç”¨

- â€œoffâ€ æˆ– 0 - å…³é—­è§„åˆ™
- â€œwarnâ€ æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)
- â€œerrorâ€ æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)

### 2. Prettier

> Prettier æ˜¯æ ¼å¼åŒ–ä»£ç å·¥å…·ã€‚ç”¨æ¥ä¿æŒå›¢é˜Ÿçš„é¡¹ç›®é£æ ¼ç»Ÿä¸€

#### 2.1 å¦‚ä½•é…ç½®

- æ–¹å¼1 ï¼šæ ¹ç›®å½•åˆ›å»º.prettierrc
- æ–¹å¼2: package.jsonä¸­æ–°å»ºprettierå±æ€§ã€‚

```
//æ–¹å¼1 

module.exports = {
  "printWidth": 160, //ä¸€è¡Œçš„å­—ç¬¦æ•°ï¼Œå¦‚æœè¶…è¿‡ä¼šè¿›è¡Œæ¢è¡Œï¼Œé»˜è®¤ä¸º80
  "tabWidth": 2, //ä¸€ä¸ªtabä»£è¡¨å‡ ä¸ªç©ºæ ¼æ•°
  "useTabs": false, //æ˜¯å¦ä½¿ç”¨tabè¿›è¡Œç¼©è¿›ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºç”¨ç©ºæ ¼è¿›è¡Œç¼©å‡
  "singleQuote": false, //å­—ç¬¦ä¸²æ˜¯å¦ä½¿ç”¨å•å¼•å·ï¼Œé»˜è®¤ä¸ºfalseï¼Œä½¿ç”¨åŒå¼•å·
  â€œuseEditorConfigâ€: false, // æ˜¯å¦ä½¿ç”¨é¡¹ç›®ä¸­çš„.editorconfigæ–‡ä»¶
  "semi": true, //è¡Œä½æ˜¯å¦ä½¿ç”¨åˆ†å·ï¼Œé»˜è®¤ä¸ºtrue
  "bracketSpacing": true, //å¯¹è±¡å¤§æ‹¬å·ç›´æ¥æ˜¯å¦æœ‰ç©ºæ ¼ï¼Œé»˜è®¤ä¸ºtrueï¼Œæ•ˆæœï¼š{ foo: bar }
}

```

#### 2.2 å¦‚ä½•ä½¿ç”¨

> ä½¿ç”¨eslint-plugin-prettieræ’ä»¶æ¥æ·»åŠ prettierä½œä¸ºESLintçš„è§„åˆ™é…ç½®ï¼Œåœ¨ESLintè¿è¡ŒPrettier

##### 2.2.1 å®‰è£…

å®‰è£…eslint-plugin-prettier

```
npm install --save-dev eslint-plugin-prettier
```

##### 2.2.2 é…ç½® eslint

```
// packjson
"eslintConfig": {
    "extends": [
      "plugin:vue/essential",
      "@vue/airbnb",
      "prettier"
    ],
    "plugins": [
      "prettier"
    ],
    "rules": {
      "prettier/prettier": "error",
     }
 }

```

psğŸ†: Prettieråˆ†åˆ«å¼•å…¥åˆ°extendsä¸pluginsä¸­æ˜¯ä¸ºäº†é˜²æ­¢eslinté…ç½®çš„rulesä¸Prettieré…ç½®çš„ruleså†²çª

### 3. æ–‡æ¡£ç±»çº¦æŸ

> æ–‡æ¡£ç±»çº¦æŸå¯ä»¥å‚è€ƒä¸€äº›ç°æœ‰çš„å›¢é˜Ÿè§„èŒƒ

- [äº¬ä¸œå‡¹å‡¸å®éªŒå®¤ä»£ç è§„èŒƒ](https://guide.aotu.io/docs/index.html)
- [clean-code-javascript](https://github.com/ryanmcdermott/clean-code-javascript?utm_source=gold_browser_extension)
- [Airbnbå›¢é˜Ÿ](https://github.com/airbnb/javascript)
- [ç™¾åº¦fexå›¢é˜Ÿ](https://github.com/fex-team/styleguide)